
------------------------------ Lit
T |- i => Int           ~> i



x : A \in T
------------------------------ Var
T |- x => A             ~> x


T, x : A |- E <= B                ~> e
---------------------------------------------- Lam
T |- \x.E : A -> B => A -> B      ~> \x.e


T |- e => A        ~> e
------------------------------- Rcd
T |- e => {l = e}  ~> {l = e}


T |- E1 => A             ~> e1
T |- E2 => B             ~> e2
A <: B->? ~> C           ~> c
----------------------------------------- App
T |- E1 E2 => C          ~> c (e1 e2)


T |- E => A.             ~> e
A <: l->? ~> B           ~> c
-------------------------------------- Proj
T |- E.l => B            ~> c (e.l)


T |- E => A          ~> e
------------------------------- Ann
T |- E : A => A      ~> e


T |- E => A          ~> e
A <: B ~> .          ~> c
------------------------------ Sub
T |- E <= B          ~> c e


T |- E1 => A1           ~> e1
T |- E2 => A2           ~> e2
-------------------------------------- Mrg
T |- E1,,E2 => A1 & A2  ~> (e1, e2)




--------------------------------------
Subtyping
--------------------------------------


--------------------- Int
Int <: Int   ~> id


---------------------- Top
A <: Top     ~> top


B <: A                 ~> c1      
C <: Do                ~> c2
------------------------------------ Arr
A -> C <: B -> Do      ~> c1 -> c2


A <: Bo                 ~> c
-------------------------------------- Rcd
{l : A} <: {l : Bo}     ~> {l : c}


B1 <| B |> B2
A <: B1       ~> c1
A <: B2       ~> c2
---------------------------- And
A <: B        ~> <c1, c2>


A <: Co      ~> c
----------------------------- And-L
A & B <: Co  ~> c . π1


B <: Co      ~> c
-------------------------- And-R
A & B <: Co  ~> c . π2


B <: A1
----------------------------- V-Arr
A1 -> A2 <: B->    ~> id



----------------------------- V-Lbl
{l : A} <: l->     ~> id



A1 <: S->          ~> id
--------------------------------- V-And-L
A1 & A2 <: S->     ~> id


A2 <: S->          ~> id
-------------------------- V-And-R
A1 & A2 <: S->     ~> id


B <: A1                  ~> id
----------------------------------------- As-Arr
A1 -> A2 <: B->? ~> A2   ~> id


------------------------------------ As-Lbl
{l : A} <: l->? ~> A    ~> id


A1 <: S->? ~> C         ~> c
not A2 <: S->
------------------------------------ As-And-L
A1 & A2 <: S->? ~> C    ~> c . π1


A2 <: S->? ~> C         ~> c
not A1 <: S->
------------------------------------ As-And-R
A1 & A2 <: S->? ~> C    ~> c . π2


A1 <: S->? ~> C         ~> c1
A2 <: S->? ~> C         ~> c1
-------------------------------------- As-And-P
A1 & A2 <: S->? ~> C    ~> c1 x c2
