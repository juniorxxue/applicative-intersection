% generated by Ott 0.31 from: rules.ott
\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \ottmv{termvar} ,\, \ottmv{x} $ &  \\
 $ \ottmv{i} ,\, \ottmv{l} $ &  \\
}}

\newcommand{\otttyp}{
\ottrulehead{\ottnt{typ}  ,\ A  ,\ B  ,\ C  ,\ D  ,\ E  ,\ A^{o}  ,\ B^{o}  ,\ C^{o}  ,\ D^{o}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathsf{Int}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathsf{Bool}}{}{}{}{\ottcom{only for demo}}\ottprodnewline
\ottprodline{|}{\mathsf{String}}{}{}{}{\ottcom{only for demo}}\ottprodnewline
\ottprodline{|}{\mathsf{Top}}{}{}{}{}\ottprodnewline
\ottprodline{|}{A  \rightarrow  B}{}{}{}{}\ottprodnewline
\ottprodline{|}{A  \, \& \,  B}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  A  \ottsym{)}}{}{}{}{}}

\newcommand{\ottexp}{
\ottrulehead{\ottnt{exp}  ,\ e  ,\ v  ,\ p  ,\ 1}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottmv{x}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{i}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \lambda \ottmv{x} .\, e \ottsym{:} A  \rightarrow  B }{}{}{}{}\ottprodnewline
\ottprodline{|}{e_{{\mathrm{1}}} \, e_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{e_{{\mathrm{1}}}  \,,,\,  e_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{e  \ottsym{:}  A}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  e  \ottsym{)}}{}{}{}{}}

\newcommand{\ottctx}{
\ottrulehead{\ottnt{ctx}  ,\ \Gamma}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \cdot }{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  A}{}{}{}{}}

\newcommand{\ottarg}{
\ottrulehead{\ottnt{arg}  ,\ S}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \cdot }{}{}{}{}\ottprodnewline
\ottprodline{|}{A}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{l}}{}{}{}{}}

\newcommand{\ottdir}{
\ottrulehead{:}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \Rightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Leftarrow }{}{}{}{}}

\newcommand{\ottvl}{
\ottrulehead{vl}{::=}{}\ottprodnewline
\ottfirstprodline{|}{v}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{l}}{}{}{}{}}

\newcommand{\ottot}{
\ottrulehead{\, \rightsquigarrow option \, B}{::=}{}\ottprodnewline
\ottfirstprodline{|}{  }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \colorbox{lightgray}{$ \rightsquigarrow  A  $} }{}{}{}{}}

\newcommand{\ottpar}{
\ottrulehead{\ottnt{par}  ,\ P}{::=}{}\ottprodnewline
\ottfirstprodline{|}{S}{}{}{}{}\ottprodnewline
\ottprodline{|}{ S  _{\rightarrow} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ S  _{\rightarrow?} }{}{}{}{}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\otttyp\ottinterrule
\ottexp\ottinterrule
\ottctx\ottinterrule
\ottarg\ottinterrule
\ottdir\ottinterrule
\ottvl\ottinterrule
\ottot\ottinterrule
\ottpar\ottafterlastrule
}}

% defnss
% defns SplitType
%% defn Split
\newcommand{\ottdruleSpXXAnd}[1]{\ottdrule[#1]{%
}{
 A  \hookleftarrow  A  \, \& \,  B  \hookrightarrow  B }{%
{\ottdrulename{Sp\_And}}{}%
}}


\newcommand{\ottdruleSpXXArr}[1]{\ottdrule[#1]{%
\ottpremise{ B_{{\mathrm{1}}}  \hookleftarrow  B  \hookrightarrow  B_{{\mathrm{2}}} }%
}{
 A  \rightarrow  B_{{\mathrm{1}}}  \hookleftarrow  A  \rightarrow  B  \hookrightarrow  A  \rightarrow  B_{{\mathrm{2}}} }{%
{\ottdrulename{Sp\_Arr}}{}%
}}

\newcommand{\ottdefnSplit}[1]{\begin{ottdefnblock}[#1]{$ A_{{\mathrm{1}}}  \hookleftarrow  A  \hookrightarrow  A_{{\mathrm{2}}} $}{\ottcom{Splittable Types}}
\ottusedrule{\ottdruleSpXXAnd{}}
\ottusedrule{\ottdruleSpXXArr{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsSplitType}{
\ottdefnSplit{}}

% defns Subtyping
%% defn Sub
\newcommand{\ottdruleSubXXInt}[1]{\ottdrule[#1]{%
}{
 \mathsf{Int}   \ottsym{<:}   \mathsf{Int} }{%
{\ottdrulename{Sub\_Int}}{}%
}}


\newcommand{\ottdruleSubXXTop}[1]{\ottdrule[#1]{%
}{
 A   \ottsym{<:}   \mathsf{Top} }{%
{\ottdrulename{Sub\_Top}}{}%
}}


\newcommand{\ottdruleSubXXArr}[1]{\ottdrule[#1]{%
\ottpremise{ C   \ottsym{<:}   A }%
\ottpremise{ B   \ottsym{<:}   D^{o} }%
}{
 A  \rightarrow  B   \ottsym{<:}   C  \rightarrow  D^{o} }{%
{\ottdrulename{Sub\_Arr}}{}%
}}


\newcommand{\ottdruleSubXXAnd}[1]{\ottdrule[#1]{%
\ottpremise{ B_{{\mathrm{1}}}  \hookleftarrow  B  \hookrightarrow  B_{{\mathrm{2}}} }%
\ottpremise{ A   \ottsym{<:}   B_{{\mathrm{1}}} }%
\ottpremise{ A   \ottsym{<:}   B_{{\mathrm{2}}} }%
}{
 A   \ottsym{<:}   B }{%
{\ottdrulename{Sub\_And}}{}%
}}


\newcommand{\ottdruleSubXXAndXXL}[1]{\ottdrule[#1]{%
\ottpremise{ A   \ottsym{<:}   C^{o} }%
}{
 A  \, \& \,  B   \ottsym{<:}   C^{o} }{%
{\ottdrulename{Sub\_And\_L}}{}%
}}


\newcommand{\ottdruleSubXXAndXXR}[1]{\ottdrule[#1]{%
\ottpremise{ B   \ottsym{<:}   C^{o} }%
}{
 A  \, \& \,  B   \ottsym{<:}   C^{o} }{%
{\ottdrulename{Sub\_And\_R}}{}%
}}

\newcommand{\ottdefnSub}[1]{\begin{ottdefnblock}[#1]{$ A   \ottsym{<:}   B $}{\ottcom{Subtyping}}
\ottusedrule{\ottdruleSubXXInt{}}
\ottusedrule{\ottdruleSubXXTop{}}
\ottusedrule{\ottdruleSubXXArr{}}
\ottusedrule{\ottdruleSubXXAnd{}}
\ottusedrule{\ottdruleSubXXAndXXL{}}
\ottusedrule{\ottdruleSubXXAndXXR{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsSubtyping}{
\ottdefnSub{}}

% defns IsoSub
%% defn ISub
\newcommand{\ottdruleISubXXRefl}[1]{\ottdrule[#1]{%
}{
 A \approx A }{%
{\ottdrulename{ISub\_Refl}}{}%
}}


\newcommand{\ottdruleISubXXAnd}[1]{\ottdrule[#1]{%
\ottpremise{ B_{{\mathrm{1}}}  \hookleftarrow  B  \hookrightarrow  B_{{\mathrm{2}}} }%
\ottpremise{ A_{{\mathrm{1}}} \approx B_{{\mathrm{1}}} }%
\ottpremise{ A_{{\mathrm{2}}} \approx B_{{\mathrm{2}}} }%
}{
 A_{{\mathrm{1}}}  \, \& \,  A_{{\mathrm{2}}} \approx B }{%
{\ottdrulename{ISub\_And}}{}%
}}

\newcommand{\ottdefnISub}[1]{\begin{ottdefnblock}[#1]{$ A \approx B $}{\ottcom{Isomorphic Subtyping}}
\ottusedrule{\ottdruleISubXXRefl{}}
\ottusedrule{\ottdruleISubXXAnd{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsIsoSub}{
\ottdefnISub{}}

% defns AppSub
%% defn AppSubBinary
\newcommand{\ottdruleAasXXRefl}[1]{\ottdrule[#1]{%
}{
  \cdot  \vdash A }{%
{\ottdrulename{Aas\_Refl}}{}%
}}


\newcommand{\ottdruleAasXXArr}[1]{\ottdrule[#1]{%
\ottpremise{ C   \ottsym{<:}   A }%
}{
 C \vdash A  \rightarrow  B }{%
{\ottdrulename{Aas\_Arr}}{}%
}}


\newcommand{\ottdruleAasXXAndXXL}[1]{\ottdrule[#1]{%
\ottpremise{ C \vdash A }%
}{
 C \vdash A  \, \& \,  B }{%
{\ottdrulename{Aas\_And\_L}}{}%
}}


\newcommand{\ottdruleAasXXAndXXR}[1]{\ottdrule[#1]{%
\ottpremise{ C \vdash B }%
}{
 C \vdash A  \, \& \,  B }{%
{\ottdrulename{Aas\_And\_R}}{}%
}}

\newcommand{\ottdefnAppSubBinary}[1]{\begin{ottdefnblock}[#1]{$ S \vdash A $}{\ottcom{Applicative Subtyping (Binary)}}
\ottusedrule{\ottdruleAasXXRefl{}}
\ottusedrule{\ottdruleAasXXArr{}}
\ottusedrule{\ottdruleAasXXAndXXL{}}
\ottusedrule{\ottdruleAasXXAndXXR{}}
\end{ottdefnblock}}

%% defn AppSub
\newcommand{\ottdruleAssXXRefl}[1]{\ottdrule[#1]{%
}{
  \cdot   \vdash  A   \ottsym{<:}   A }{%
{\ottdrulename{Ass\_Refl}}{}%
}}


\newcommand{\ottdruleAssXXArr}[1]{\ottdrule[#1]{%
\ottpremise{ C   \ottsym{<:}   A }%
}{
 C  \vdash  A  \rightarrow  B   \ottsym{<:}   B }{%
{\ottdrulename{Ass\_Arr}}{}%
}}


\newcommand{\ottdruleAssXXAndXXL}[1]{\ottdrule[#1]{%
\ottpremise{ S  \vdash  A   \ottsym{<:}   D }%
\ottpremise{ \neg   S \vdash B  }%
}{
 S  \vdash  A  \, \& \,  B   \ottsym{<:}   D }{%
{\ottdrulename{Ass\_And\_L}}{}%
}}


\newcommand{\ottdruleAssXXAndXXR}[1]{\ottdrule[#1]{%
\ottpremise{ S  \vdash  B   \ottsym{<:}   D }%
\ottpremise{ \neg   S \vdash A  }%
}{
 S  \vdash  A  \, \& \,  B   \ottsym{<:}   D }{%
{\ottdrulename{Ass\_And\_R}}{}%
}}


\newcommand{\ottdruleAssXXAndXXP}[1]{\ottdrule[#1]{%
\ottpremise{ S  \vdash  A   \ottsym{<:}   D_{{\mathrm{1}}} }%
\ottpremise{ S  \vdash  B   \ottsym{<:}   D_{{\mathrm{2}}} }%
}{
 S  \vdash  A  \, \& \,  B   \ottsym{<:}   D_{{\mathrm{1}}}  \, \& \,  D_{{\mathrm{2}}} }{%
{\ottdrulename{Ass\_And\_P}}{}%
}}

\newcommand{\ottdefnAppSub}[1]{\begin{ottdefnblock}[#1]{$ S  \vdash  A   \ottsym{<:}   B $}{\ottcom{Applicative Subtyping}}
\ottusedrule{\ottdruleAssXXRefl{}}
\ottusedrule{\ottdruleAssXXArr{}}
\ottusedrule{\ottdruleAssXXAndXXL{}}
\ottusedrule{\ottdruleAssXXAndXXR{}}
\ottusedrule{\ottdruleAssXXAndXXP{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsAppSub}{
\ottdefnAppSubBinary{}\ottdefnAppSub{}}

% defns UnifiedSubtyping
%% defn Usub
\newcommand{\ottdruleSXXInt}[1]{\ottdrule[#1]{%
}{
 \mathsf{Int}  \leq  \mathsf{Int}      }{%
{\ottdrulename{S\_Int}}{}%
}}


\newcommand{\ottdruleSXXTop}[1]{\ottdrule[#1]{%
}{
 A  \leq  \mathsf{Top}      }{%
{\ottdrulename{S\_Top}}{}%
}}


\newcommand{\ottdruleSXXArr}[1]{\ottdrule[#1]{%
\ottpremise{ B  \leq  A      }%
\ottpremise{ C  \leq  D^{o}      }%
}{
 A  \rightarrow  C  \leq  B  \rightarrow  D^{o}      }{%
{\ottdrulename{S\_Arr}}{}%
}}


\newcommand{\ottdruleSXXAnd}[1]{\ottdrule[#1]{%
\ottpremise{ B_{{\mathrm{1}}}  \hookleftarrow  B  \hookrightarrow  B_{{\mathrm{2}}} }%
\ottpremise{ A  \leq  B_{{\mathrm{1}}}      }%
\ottpremise{ A  \leq  B_{{\mathrm{2}}}      }%
}{
 A  \leq  B      }{%
{\ottdrulename{S\_And}}{}%
}}


\newcommand{\ottdruleSXXAndXXL}[1]{\ottdrule[#1]{%
\ottpremise{ A  \leq  C^{o}      }%
}{
 A  \, \& \,  B  \leq  C^{o}      }{%
{\ottdrulename{S\_And\_L}}{}%
}}


\newcommand{\ottdruleSXXAndXXR}[1]{\ottdrule[#1]{%
\ottpremise{ B  \leq  C^{o}      }%
}{
 A  \, \& \,  B  \leq  C^{o}      }{%
{\ottdrulename{S\_And\_R}}{}%
}}


\newcommand{\ottdruleSXXVXXArr}[1]{\ottdrule[#1]{%
\ottpremise{ B  \leq  A_{{\mathrm{1}}}      }%
}{
 A_{{\mathrm{1}}}  \rightarrow  A_{{\mathrm{2}}}  \leq   B  _{\rightarrow}       }{%
{\ottdrulename{S\_V\_Arr}}{}%
}}


\newcommand{\ottdruleSXXVXXAndXXL}[1]{\ottdrule[#1]{%
\ottpremise{ A_{{\mathrm{1}}}  \leq   S  _{\rightarrow}       }%
}{
 A_{{\mathrm{1}}}  \, \& \,  A_{{\mathrm{2}}}  \leq   S  _{\rightarrow}       }{%
{\ottdrulename{S\_V\_And\_L}}{}%
}}


\newcommand{\ottdruleSXXVXXAndXXR}[1]{\ottdrule[#1]{%
\ottpremise{ A_{{\mathrm{2}}}  \leq   S  _{\rightarrow}       }%
}{
 A_{{\mathrm{1}}}  \, \& \,  A_{{\mathrm{2}}}  \leq   S  _{\rightarrow}       }{%
{\ottdrulename{S\_V\_And\_R}}{}%
}}


\newcommand{\ottdruleSXXAsXXArr}[1]{\ottdrule[#1]{%
\ottpremise{ B  \leq  A_{{\mathrm{1}}}      }%
}{
 A_{{\mathrm{1}}}  \rightarrow  A_{{\mathrm{2}}}  \leq   B  _{\rightarrow?}     \colorbox{lightgray}{$ \rightsquigarrow  A_{{\mathrm{2}}}  $}  }{%
{\ottdrulename{S\_As\_Arr}}{}%
}}


\newcommand{\ottdruleSXXAsXXAndXXL}[1]{\ottdrule[#1]{%
\ottpremise{ A_{{\mathrm{1}}}  \leq   S  _{\rightarrow?}     \colorbox{lightgray}{$ \rightsquigarrow  C  $}  }%
\ottpremise{ \neg   A_{{\mathrm{2}}}  \leq   S  _{\rightarrow}        }%
}{
 A_{{\mathrm{1}}}  \, \& \,  A_{{\mathrm{2}}}  \leq   S  _{\rightarrow?}     \colorbox{lightgray}{$ \rightsquigarrow  C  $}  }{%
{\ottdrulename{S\_As\_And\_L}}{}%
}}


\newcommand{\ottdruleSXXAsXXAndXXR}[1]{\ottdrule[#1]{%
\ottpremise{ A_{{\mathrm{2}}}  \leq   S  _{\rightarrow?}     \colorbox{lightgray}{$ \rightsquigarrow  C  $}  }%
\ottpremise{ \neg   A_{{\mathrm{1}}}  \leq   S  _{\rightarrow}        }%
}{
 A_{{\mathrm{1}}}  \, \& \,  A_{{\mathrm{2}}}  \leq   S  _{\rightarrow?}     \colorbox{lightgray}{$ \rightsquigarrow  C  $}  }{%
{\ottdrulename{S\_As\_And\_R}}{}%
}}


\newcommand{\ottdruleSXXAsXXAndXXP}[1]{\ottdrule[#1]{%
\ottpremise{ A_{{\mathrm{1}}}  \leq   S  _{\rightarrow?}     \colorbox{lightgray}{$ \rightsquigarrow  C_{{\mathrm{1}}}  $}  }%
\ottpremise{ A_{{\mathrm{2}}}  \leq   S  _{\rightarrow?}     \colorbox{lightgray}{$ \rightsquigarrow  C_{{\mathrm{2}}}  $}  }%
}{
 A_{{\mathrm{1}}}  \, \& \,  A_{{\mathrm{2}}}  \leq   S  _{\rightarrow?}     \colorbox{lightgray}{$ \rightsquigarrow  C_{{\mathrm{1}}}  \, \& \,  C_{{\mathrm{2}}}  $}  }{%
{\ottdrulename{S\_As\_And\_P}}{}%
}}

\newcommand{\ottdefnUsub}[1]{\begin{ottdefnblock}[#1]{$ A  \leq  P   \, \rightsquigarrow option \, B $}{\ottcom{Applicative Subtyping}}
\ottusedrule{\ottdruleSXXInt{}}
\ottusedrule{\ottdruleSXXTop{}}
\ottusedrule{\ottdruleSXXArr{}}
\ottusedrule{\ottdruleSXXAnd{}}
\ottusedrule{\ottdruleSXXAndXXL{}}
\ottusedrule{\ottdruleSXXAndXXR{}}
\ottusedrule{\ottdruleSXXVXXArr{}}
\ottusedrule{\ottdruleSXXVXXAndXXL{}}
\ottusedrule{\ottdruleSXXVXXAndXXR{}}
\ottusedrule{\ottdruleSXXAsXXArr{}}
\ottusedrule{\ottdruleSXXAsXXAndXXL{}}
\ottusedrule{\ottdruleSXXAsXXAndXXR{}}
\ottusedrule{\ottdruleSXXAsXXAndXXP{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsUnifiedSubtyping}{
\ottdefnUsub{}}

% defns PrincipalTyping
%% defn Ptype
\newcommand{\ottdrulePtXXInt}[1]{\ottdrule[#1]{%
}{
 \mathsf{Ptype}~ \ottmv{i} ~ \mathsf{Int} }{%
{\ottdrulename{Pt\_Int}}{}%
}}


\newcommand{\ottdrulePtXXArr}[1]{\ottdrule[#1]{%
}{
 \mathsf{Ptype}~  \lambda \ottmv{x} .\, e \ottsym{:} A  \rightarrow  B  ~ A  \rightarrow  B }{%
{\ottdrulename{Pt\_Arr}}{}%
}}


\newcommand{\ottdrulePtXXAnn}[1]{\ottdrule[#1]{%
}{
 \mathsf{Ptype}~ e  \ottsym{:}  A ~ A }{%
{\ottdrulename{Pt\_Ann}}{}%
}}


\newcommand{\ottdrulePtXXMrg}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Ptype}~ e_{{\mathrm{1}}} ~ A }%
\ottpremise{ \mathsf{Ptype}~ e_{{\mathrm{2}}} ~ B }%
}{
 \mathsf{Ptype}~ e_{{\mathrm{1}}}  \,,,\,  e_{{\mathrm{2}}} ~ A  \, \& \,  B }{%
{\ottdrulename{Pt\_Mrg}}{}%
}}

\newcommand{\ottdefnPtype}[1]{\begin{ottdefnblock}[#1]{$ \mathsf{Ptype}~ e ~ A $}{}
\ottusedrule{\ottdrulePtXXInt{}}
\ottusedrule{\ottdrulePtXXArr{}}
\ottusedrule{\ottdrulePtXXAnn{}}
\ottusedrule{\ottdrulePtXXMrg{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsPrincipalTyping}{
\ottdefnPtype{}}

% defns ArgumentalTyping
%% defn Atype
\newcommand{\ottdruleAtXXAnn}[1]{\ottdrule[#1]{%
}{
 \mathsf{Atype}~ e  \ottsym{:}  A ~ A }{%
{\ottdrulename{At\_Ann}}{}%
}}


\newcommand{\ottdruleAtXXMrg}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Atype}~ e_{{\mathrm{1}}} ~ A }%
\ottpremise{ \mathsf{Atype}~ e_{{\mathrm{2}}} ~ B }%
}{
 \mathsf{Atype}~ e_{{\mathrm{1}}}  \,,,\,  e_{{\mathrm{2}}} ~ A  \, \& \,  B }{%
{\ottdrulename{At\_Mrg}}{}%
}}


\newcommand{\ottdruleAtXXLbl}[1]{\ottdrule[#1]{%
}{
 \mathsf{Atype}~ \ottmv{l} ~ \ottmv{l} }{%
{\ottdrulename{At\_Lbl}}{}%
}}

\newcommand{\ottdefnAtype}[1]{\begin{ottdefnblock}[#1]{$ \mathsf{Atype}~ e ~ S $}{}
\ottusedrule{\ottdruleAtXXAnn{}}
\ottusedrule{\ottdruleAtXXMrg{}}
\ottusedrule{\ottdruleAtXXLbl{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsArgumentalTyping}{
\ottdefnAtype{}}

% defns Casting
%% defn Casting
\newcommand{\ottdruleCtXXRefl}[1]{\ottdrule[#1]{%
\ottpremise{ A   \ottsym{<:}   \mathsf{Int} }%
}{
 \ottmv{i}  \ottsym{:}  A  \, \longmapsto _{ \mathsf{Int} } \,  \ottmv{i}  \ottsym{:}  \mathsf{Int} }{%
{\ottdrulename{Ct\_Refl}}{}%
}}


\newcommand{\ottdruleCtXXTop}[1]{\ottdrule[#1]{%
}{
 v  \, \longmapsto _{ \mathsf{Top} } \,  1  \ottsym{:}  \mathsf{Top} }{%
{\ottdrulename{Ct\_Top}}{}%
}}


\newcommand{\ottdruleCtXXArr}[1]{\ottdrule[#1]{%
\ottpremise{ E   \ottsym{<:}   C  \rightarrow  D }%
}{
 \ottsym{(}   \lambda \ottmv{x} .\, e \ottsym{:} A  \rightarrow  B   \ottsym{)}  \ottsym{:}  E  \, \longmapsto _{ \ottsym{(}  C  \rightarrow  D^{o}  \ottsym{)} } \,  \ottsym{(}   \lambda \ottmv{x} .\, e \ottsym{:} A  \rightarrow  D^{o}   \ottsym{)}  \ottsym{:}  \ottsym{(}  C  \rightarrow  D^{o}  \ottsym{)} }{%
{\ottdrulename{Ct\_Arr}}{}%
}}


\newcommand{\ottdruleCtXXMrgXXL}[1]{\ottdrule[#1]{%
\ottpremise{ v_{{\mathrm{1}}}  \, \longmapsto _{ A^{o} } \,  v'_{{\mathrm{1}}} }%
}{
 v_{{\mathrm{1}}}  \,,,\,  v_{{\mathrm{2}}}  \, \longmapsto _{ A^{o} } \,  v'_{{\mathrm{1}}} }{%
{\ottdrulename{Ct\_Mrg\_L}}{}%
}}


\newcommand{\ottdruleCtXXMrgXXR}[1]{\ottdrule[#1]{%
\ottpremise{ v_{{\mathrm{2}}}  \, \longmapsto _{ A^{o} } \,  v'_{{\mathrm{2}}} }%
}{
 v_{{\mathrm{1}}}  \,,,\,  v_{{\mathrm{2}}}  \, \longmapsto _{ A^{o} } \,  v'_{{\mathrm{2}}} }{%
{\ottdrulename{Ct\_Mrg\_R}}{}%
}}


\newcommand{\ottdruleCtXXAnd}[1]{\ottdrule[#1]{%
\ottpremise{ A_{{\mathrm{1}}}  \hookleftarrow  A  \hookrightarrow  A_{{\mathrm{2}}} }%
\ottpremise{ v  \, \longmapsto _{ A_{{\mathrm{1}}} } \,  v_{{\mathrm{1}}} }%
\ottpremise{ v  \, \longmapsto _{ A_{{\mathrm{2}}} } \,  v_{{\mathrm{2}}} }%
}{
 v  \, \longmapsto _{ A } \,  v_{{\mathrm{1}}}  \,,,\,  v_{{\mathrm{2}}} }{%
{\ottdrulename{Ct\_And}}{}%
}}

\newcommand{\ottdefnCasting}[1]{\begin{ottdefnblock}[#1]{$ v  \, \longmapsto _{ A } \,  v' $}{\ottcom{Casting}}
\ottusedrule{\ottdruleCtXXRefl{}}
\ottusedrule{\ottdruleCtXXTop{}}
\ottusedrule{\ottdruleCtXXArr{}}
\ottusedrule{\ottdruleCtXXMrgXXL{}}
\ottusedrule{\ottdruleCtXXMrgXXR{}}
\ottusedrule{\ottdruleCtXXAnd{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsCasting}{
\ottdefnCasting{}}

% defns ParallelApplication
%% defn Papp
\newcommand{\ottdruleOaXXLam}[1]{\ottdrule[#1]{%
\ottpremise{ v  \, \longmapsto _{ A } \,  v' }%
}{
 ( \ottsym{(}   \lambda \ottmv{x} .\, e \ottsym{:} A  \rightarrow  B   \ottsym{)}  \ottsym{:}  C  \rightarrow  D ~ v )~ \rightrightarrows ~ e  \ottsym{[}  \ottmv{x}  \mapsto  v'  \ottsym{]}  \ottsym{:}  D }{%
{\ottdrulename{Oa\_Lam}}{}%
}}


\newcommand{\ottdruleOaXXMrgXXL}[1]{\ottdrule[#1]{%
\ottpremise{ \neg   ptype ( v_2 ) <: atype ( vl ) _{\rightarrow} \mapsto  }%
\ottpremise{ ( v_{{\mathrm{1}}} ~ vl )~ \rightrightarrows ~ e }%
}{
 ( v_{{\mathrm{1}}}  \,,,\,  v_{{\mathrm{2}}} ~ vl )~ \rightrightarrows ~ e }{%
{\ottdrulename{Oa\_Mrg\_L}}{}%
}}


\newcommand{\ottdruleOaXXMrgXXR}[1]{\ottdrule[#1]{%
\ottpremise{ \neg   ptype ( v_1 ) <: atype ( vl ) _{\rightarrow} \mapsto  }%
\ottpremise{ ( v_{{\mathrm{2}}} ~ vl )~ \rightrightarrows ~ e }%
}{
 ( v_{{\mathrm{1}}}  \,,,\,  v_{{\mathrm{2}}} ~ vl )~ \rightrightarrows ~ e }{%
{\ottdrulename{Oa\_Mrg\_R}}{}%
}}


\newcommand{\ottdruleOaXXMrgXXP}[1]{\ottdrule[#1]{%
\ottpremise{ ptype ( v_1 ) <: atype ( vl ) _{\rightarrow} \mapsto }%
\ottpremise{ ptype ( v_2 ) <: atype ( vl ) _{\rightarrow} \mapsto }%
\ottpremise{ ( v_{{\mathrm{1}}} ~ vl )~ \rightrightarrows ~ e_{{\mathrm{1}}} }%
\ottpremise{ ( v_{{\mathrm{2}}} ~ vl )~ \rightrightarrows ~ e_{{\mathrm{2}}} }%
}{
 ( v_{{\mathrm{1}}}  \,,,\,  v_{{\mathrm{2}}} ~ vl )~ \rightrightarrows ~ e_{{\mathrm{1}}}  \,,,\,  e_{{\mathrm{2}}} }{%
{\ottdrulename{Oa\_Mrg\_P}}{}%
}}

\newcommand{\ottdefnPapp}[1]{\begin{ottdefnblock}[#1]{$ ( v ~ vl )~ \rightrightarrows ~ e $}{\ottcom{Overloaded Application}}
\ottusedrule{\ottdruleOaXXLam{}}
\ottusedrule{\ottdruleOaXXMrgXXL{}}
\ottusedrule{\ottdruleOaXXMrgXXR{}}
\ottusedrule{\ottdruleOaXXMrgXXP{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsParallelApplication}{
\ottdefnPapp{}}

% defns Reduction
%% defn Step
\newcommand{\ottdruleStepXXIntXXAnn}[1]{\ottdrule[#1]{%
}{
 \ottmv{i} ~\longmapsto~ \ottmv{i}  \ottsym{:}  \mathsf{Int} }{%
{\ottdrulename{Step\_Int\_Ann}}{}%
}}


\newcommand{\ottdruleStepXXArrXXAnn}[1]{\ottdrule[#1]{%
}{
  \lambda \ottmv{x} .\, e \ottsym{:} A  \rightarrow  B  ~\longmapsto~ \ottsym{(}   \lambda \ottmv{x} .\, e \ottsym{:} A  \rightarrow  B   \ottsym{)}  \ottsym{:}  A  \rightarrow  B }{%
{\ottdrulename{Step\_Arr\_Ann}}{}%
}}


\newcommand{\ottdruleStepXXPvXXSplit}[1]{\ottdrule[#1]{%
\ottpremise{ A_{{\mathrm{1}}}  \hookleftarrow  A  \hookrightarrow  A_{{\mathrm{2}}} }%
}{
 p  \ottsym{:}  A ~\longmapsto~ p  \ottsym{:}  A_{{\mathrm{1}}}  \,,,\,  p  \ottsym{:}  A_{{\mathrm{2}}} }{%
{\ottdrulename{Step\_Pv\_Split}}{}%
}}


\newcommand{\ottdruleStepXXPapp}[1]{\ottdrule[#1]{%
\ottpremise{ ( v_{{\mathrm{1}}} ~ v_{{\mathrm{2}}} )~ \rightrightarrows ~ e }%
}{
 v_{{\mathrm{1}}} \, v_{{\mathrm{2}}} ~\longmapsto~ e }{%
{\ottdrulename{Step\_Papp}}{}%
}}


\newcommand{\ottdruleStepXXValXXAnn}[1]{\ottdrule[#1]{%
\ottpremise{ v  \, \longmapsto _{ A } \,  v' }%
}{
 v  \ottsym{:}  A ~\longmapsto~ v' }{%
{\ottdrulename{Step\_Val\_Ann}}{}%
}}


\newcommand{\ottdruleStepXXAppXXL}[1]{\ottdrule[#1]{%
\ottpremise{ e_{{\mathrm{1}}} ~\longmapsto~ e'_{{\mathrm{1}}} }%
}{
 e_{{\mathrm{1}}} \, e_{{\mathrm{2}}} ~\longmapsto~ e'_{{\mathrm{1}}} \, e_{{\mathrm{2}}} }{%
{\ottdrulename{Step\_App\_L}}{}%
}}


\newcommand{\ottdruleStepXXAppXXR}[1]{\ottdrule[#1]{%
\ottpremise{ e_{{\mathrm{2}}} ~\longmapsto~ e'_{{\mathrm{2}}} }%
}{
 v_{{\mathrm{1}}} \, e_{{\mathrm{2}}} ~\longmapsto~ v_{{\mathrm{1}}} \, e'_{{\mathrm{2}}} }{%
{\ottdrulename{Step\_App\_R}}{}%
}}


\newcommand{\ottdruleStepXXMrgXXL}[1]{\ottdrule[#1]{%
\ottpremise{ e_{{\mathrm{1}}} ~\longmapsto~ e'_{{\mathrm{1}}} }%
}{
 e_{{\mathrm{1}}}  \,,,\,  e_{{\mathrm{2}}} ~\longmapsto~ e'_{{\mathrm{1}}}  \,,,\,  e_{{\mathrm{2}}} }{%
{\ottdrulename{Step\_Mrg\_L}}{}%
}}


\newcommand{\ottdruleStepXXMrgXXR}[1]{\ottdrule[#1]{%
\ottpremise{ e_{{\mathrm{2}}} ~\longmapsto~ e'_{{\mathrm{2}}} }%
}{
 v_{{\mathrm{1}}}  \,,,\,  e_{{\mathrm{2}}} ~\longmapsto~ v_{{\mathrm{1}}}  \,,,\,  e'_{{\mathrm{2}}} }{%
{\ottdrulename{Step\_Mrg\_R}}{}%
}}


\newcommand{\ottdruleStepXXAnn}[1]{\ottdrule[#1]{%
\ottpremise{ \neg   pvalue ~  e  }%
\ottpremise{ e ~\longmapsto~ e' }%
}{
 e  \ottsym{:}  A ~\longmapsto~ e'  \ottsym{:}  A }{%
{\ottdrulename{Step\_Ann}}{}%
}}

\newcommand{\ottdefnStep}[1]{\begin{ottdefnblock}[#1]{$ e ~\longmapsto~ e' $}{\ottcom{Small-Step Reduction}}
\ottusedrule{\ottdruleStepXXIntXXAnn{}}
\ottusedrule{\ottdruleStepXXArrXXAnn{}}
\ottusedrule{\ottdruleStepXXPvXXSplit{}}
\ottusedrule{\ottdruleStepXXPapp{}}
\ottusedrule{\ottdruleStepXXValXXAnn{}}
\ottusedrule{\ottdruleStepXXAppXXL{}}
\ottusedrule{\ottdruleStepXXAppXXR{}}
\ottusedrule{\ottdruleStepXXMrgXXL{}}
\ottusedrule{\ottdruleStepXXMrgXXR{}}
\ottusedrule{\ottdruleStepXXAnn{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsReduction}{
\ottdefnStep{}}

% defns Typing
%% defn Typing
\newcommand{\ottdruleTXXLit}[1]{\ottdrule[#1]{%
}{
 \Gamma  \vdash  \ottmv{i}    \Rightarrow    \mathsf{Int} }{%
{\ottdrulename{T\_Lit}}{}%
}}


\newcommand{\ottdruleTXXVar}[1]{\ottdrule[#1]{%
\ottpremise{ x : A ~in~ T }%
}{
 \Gamma  \vdash  \ottmv{x}    \Rightarrow    A }{%
{\ottdrulename{T\_Var}}{}%
}}


\newcommand{\ottdruleTXXLam}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  A  \vdash  e    \Leftarrow    B }%
}{
 \Gamma  \vdash   \lambda \ottmv{x} .\, e \ottsym{:} A  \rightarrow  B     \Rightarrow    A  \rightarrow  B }{%
{\ottdrulename{T\_Lam}}{}%
}}


\newcommand{\ottdruleTXXApp}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  \vdash  e_{{\mathrm{1}}}    \Rightarrow    A }%
\ottpremise{ \Gamma  \vdash  e_{{\mathrm{2}}}    \Rightarrow    B }%
\ottpremise{ A  \leq   B  _{\rightarrow?}     \colorbox{lightgray}{$ \rightsquigarrow  C  $}  }%
}{
 \Gamma  \vdash  e_{{\mathrm{1}}} \, e_{{\mathrm{2}}}    \Rightarrow    C }{%
{\ottdrulename{T\_App}}{}%
}}


\newcommand{\ottdruleTXXMrg}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  \vdash  e_{{\mathrm{1}}}    \Rightarrow    A }%
\ottpremise{ \Gamma  \vdash  e_{{\mathrm{2}}}    \Rightarrow    B }%
}{
 \Gamma  \vdash  e_{{\mathrm{1}}}  \,,,\,  e_{{\mathrm{2}}}    \Rightarrow    A  \, \& \,  B }{%
{\ottdrulename{T\_Mrg}}{}%
}}


\newcommand{\ottdruleTXXAnn}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  \vdash  e    \Leftarrow    A }%
}{
 \Gamma  \vdash  e  \ottsym{:}  A    \Rightarrow    A }{%
{\ottdrulename{T\_Ann}}{}%
}}


\newcommand{\ottdruleTXXSub}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  \vdash  e    \Rightarrow    A }%
\ottpremise{ A   \ottsym{<:}   B }%
}{
 \Gamma  \vdash  e    \Leftarrow    B }{%
{\ottdrulename{T\_Sub}}{}%
}}

\newcommand{\ottdefnTyping}[1]{\begin{ottdefnblock}[#1]{$ \Gamma  \vdash  e   :   A $}{\ottcom{Bidirectional Typing}}
\ottusedrule{\ottdruleTXXLit{}}
\ottusedrule{\ottdruleTXXVar{}}
\ottusedrule{\ottdruleTXXLam{}}
\ottusedrule{\ottdruleTXXApp{}}
\ottusedrule{\ottdruleTXXMrg{}}
\ottusedrule{\ottdruleTXXAnn{}}
\ottusedrule{\ottdruleTXXSub{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsTyping}{
\ottdefnTyping{}}

\newcommand{\ottdefnss}{
\ottdefnsSplitType
\ottdefnsSubtyping
\ottdefnsIsoSub
\ottdefnsAppSub
\ottdefnsUnifiedSubtyping
\ottdefnsPrincipalTyping
\ottdefnsArgumentalTyping
\ottdefnsCasting
\ottdefnsParallelApplication
\ottdefnsReduction
\ottdefnsTyping
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\ottdefnss}

